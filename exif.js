/*! For license information please see exif.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.EXIF=t():e.EXIF=t()}(self,(()=>(()=>{var e={43:(e,t,n)=>{!function(e){e.parser=function(e,t){return new r(e,t)},e.SAXParser=r,e.SAXStream=s,e.createStream=function(e,t){return new s(e,t)},e.MAX_BUFFER_LENGTH=65536;var t,a=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function r(t,n){if(!(this instanceof r))return new r(t,n);var i=this;!function(e){for(var t=0,n=a.length;t<n;t++)e[a[t]]=""}(i),i.q=i.c="",i.bufferCheckPosition=e.MAX_BUFFER_LENGTH,i.opt=n||{},i.opt.lowercase=i.opt.lowercase||i.opt.lowercasetags,i.looseCase=i.opt.lowercase?"toLowerCase":"toUpperCase",i.tags=[],i.closed=i.closedRoot=i.sawRoot=!1,i.tag=i.error=null,i.strict=!!t,i.noscript=!(!t&&!i.opt.noscript),i.state=N.BEGIN,i.strictEntities=i.opt.strictEntities,i.ENTITIES=i.strictEntities?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES),i.attribList=[],i.opt.xmlns&&(i.ns=Object.create(p)),void 0===i.opt.unquotedAttributeValues&&(i.opt.unquotedAttributeValues=!t),i.trackPosition=!1!==i.opt.position,i.trackPosition&&(i.position=i.line=i.column=0),S(i,"onready")}e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t}),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}),r.prototype={end:function(){O(this)},write:function(t){var n=this;if(this.error)throw this.error;if(n.closed)return P(n,"Cannot write after close. Assign an onready handler.");if(null===t)return O(n);"object"==typeof t&&(t=t.toString());for(var r=0,i="";i=M(t,r++),n.c=i,i;)switch(n.trackPosition&&(n.position++,"\n"===i?(n.line++,n.column=0):n.column++),n.state){case N.BEGIN:if(n.state=N.BEGIN_WHITESPACE,"\ufeff"===i)continue;B(n,i);continue;case N.BEGIN_WHITESPACE:B(n,i);continue;case N.TEXT:if(n.sawRoot&&!n.closedRoot){for(var s=r-1;i&&"<"!==i&&"&"!==i;)(i=M(t,r++))&&n.trackPosition&&(n.position++,"\n"===i?(n.line++,n.column=0):n.column++);n.textNode+=t.substring(s,r-1)}"<"!==i||n.sawRoot&&n.closedRoot&&!n.strict?(T(i)||n.sawRoot&&!n.closedRoot||w(n,"Text data outside of root node."),"&"===i?n.state=N.TEXT_ENTITY:n.textNode+=i):(n.state=N.OPEN_WAKA,n.startTagPosition=n.position);continue;case N.SCRIPT:"<"===i?n.state=N.SCRIPT_ENDING:n.script+=i;continue;case N.SCRIPT_ENDING:"/"===i?n.state=N.CLOSE_TAG:(n.script+="<"+i,n.state=N.SCRIPT);continue;case N.OPEN_WAKA:if("!"===i)n.state=N.SGML_DECL,n.sgmlDecl="";else if(T(i));else if(h(m,i))n.state=N.OPEN_TAG,n.tagName=i;else if("/"===i)n.state=N.CLOSE_TAG,n.tagName="";else if("?"===i)n.state=N.PROC_INST,n.procInstName=n.procInstBody="";else{if(w(n,"Unencoded <"),n.startTagPosition+1<n.position){var u=n.position-n.startTagPosition;i=new Array(u).join(" ")+i}n.textNode+="<"+i,n.state=N.TEXT}continue;case N.SGML_DECL:if(n.sgmlDecl+i==="--"){n.state=N.COMMENT,n.comment="",n.sgmlDecl="";continue}n.doctype&&!0!==n.doctype&&n.sgmlDecl?(n.state=N.DOCTYPE_DTD,n.doctype+="<!"+n.sgmlDecl+i,n.sgmlDecl=""):(n.sgmlDecl+i).toUpperCase()===o?(D(n,"onopencdata"),n.state=N.CDATA,n.sgmlDecl="",n.cdata=""):(n.sgmlDecl+i).toUpperCase()===c?(n.state=N.DOCTYPE,(n.doctype||n.sawRoot)&&w(n,"Inappropriately located doctype declaration"),n.doctype="",n.sgmlDecl=""):">"===i?(D(n,"onsgmldeclaration",n.sgmlDecl),n.sgmlDecl="",n.state=N.TEXT):E(i)?(n.state=N.SGML_DECL_QUOTED,n.sgmlDecl+=i):n.sgmlDecl+=i;continue;case N.SGML_DECL_QUOTED:i===n.q&&(n.state=N.SGML_DECL,n.q=""),n.sgmlDecl+=i;continue;case N.DOCTYPE:">"===i?(n.state=N.TEXT,D(n,"ondoctype",n.doctype),n.doctype=!0):(n.doctype+=i,"["===i?n.state=N.DOCTYPE_DTD:E(i)&&(n.state=N.DOCTYPE_QUOTED,n.q=i));continue;case N.DOCTYPE_QUOTED:n.doctype+=i,i===n.q&&(n.q="",n.state=N.DOCTYPE);continue;case N.DOCTYPE_DTD:"]"===i?(n.doctype+=i,n.state=N.DOCTYPE):"<"===i?(n.state=N.OPEN_WAKA,n.startTagPosition=n.position):E(i)?(n.doctype+=i,n.state=N.DOCTYPE_DTD_QUOTED,n.q=i):n.doctype+=i;continue;case N.DOCTYPE_DTD_QUOTED:n.doctype+=i,i===n.q&&(n.state=N.DOCTYPE_DTD,n.q="");continue;case N.COMMENT:"-"===i?n.state=N.COMMENT_ENDING:n.comment+=i;continue;case N.COMMENT_ENDING:"-"===i?(n.state=N.COMMENT_ENDED,n.comment=_(n.opt,n.comment),n.comment&&D(n,"oncomment",n.comment),n.comment=""):(n.comment+="-"+i,n.state=N.COMMENT);continue;case N.COMMENT_ENDED:">"!==i?(w(n,"Malformed comment"),n.comment+="--"+i,n.state=N.COMMENT):n.doctype&&!0!==n.doctype?n.state=N.DOCTYPE_DTD:n.state=N.TEXT;continue;case N.CDATA:"]"===i?n.state=N.CDATA_ENDING:n.cdata+=i;continue;case N.CDATA_ENDING:"]"===i?n.state=N.CDATA_ENDING_2:(n.cdata+="]"+i,n.state=N.CDATA);continue;case N.CDATA_ENDING_2:">"===i?(n.cdata&&D(n,"oncdata",n.cdata),D(n,"onclosecdata"),n.cdata="",n.state=N.TEXT):"]"===i?n.cdata+="]":(n.cdata+="]]"+i,n.state=N.CDATA);continue;case N.PROC_INST:"?"===i?n.state=N.PROC_INST_ENDING:T(i)?n.state=N.PROC_INST_BODY:n.procInstName+=i;continue;case N.PROC_INST_BODY:if(!n.procInstBody&&T(i))continue;"?"===i?n.state=N.PROC_INST_ENDING:n.procInstBody+=i;continue;case N.PROC_INST_ENDING:">"===i?(D(n,"onprocessinginstruction",{name:n.procInstName,body:n.procInstBody}),n.procInstName=n.procInstBody="",n.state=N.TEXT):(n.procInstBody+="?"+i,n.state=N.PROC_INST_BODY);continue;case N.OPEN_TAG:h(f,i)?n.tagName+=i:(v(n),">"===i?K(n):"/"===i?n.state=N.OPEN_TAG_SLASH:(T(i)||w(n,"Invalid character in tag name"),n.state=N.ATTRIB));continue;case N.OPEN_TAG_SLASH:">"===i?(K(n,!0),G(n)):(w(n,"Forward-slash in opening tag not followed by >"),n.state=N.ATTRIB);continue;case N.ATTRIB:if(T(i))continue;">"===i?K(n):"/"===i?n.state=N.OPEN_TAG_SLASH:h(m,i)?(n.attribName=i,n.attribValue="",n.state=N.ATTRIB_NAME):w(n,"Invalid attribute name");continue;case N.ATTRIB_NAME:"="===i?n.state=N.ATTRIB_VALUE:">"===i?(w(n,"Attribute without value"),n.attribValue=n.attribName,U(n),K(n)):T(i)?n.state=N.ATTRIB_NAME_SAW_WHITE:h(f,i)?n.attribName+=i:w(n,"Invalid attribute name");continue;case N.ATTRIB_NAME_SAW_WHITE:if("="===i)n.state=N.ATTRIB_VALUE;else{if(T(i))continue;w(n,"Attribute without value"),n.tag.attributes[n.attribName]="",n.attribValue="",D(n,"onattribute",{name:n.attribName,value:""}),n.attribName="",">"===i?K(n):h(m,i)?(n.attribName=i,n.state=N.ATTRIB_NAME):(w(n,"Invalid attribute name"),n.state=N.ATTRIB)}continue;case N.ATTRIB_VALUE:if(T(i))continue;E(i)?(n.q=i,n.state=N.ATTRIB_VALUE_QUOTED):(n.opt.unquotedAttributeValues||P(n,"Unquoted attribute value"),n.state=N.ATTRIB_VALUE_UNQUOTED,n.attribValue=i);continue;case N.ATTRIB_VALUE_QUOTED:if(i!==n.q){"&"===i?n.state=N.ATTRIB_VALUE_ENTITY_Q:n.attribValue+=i;continue}U(n),n.q="",n.state=N.ATTRIB_VALUE_CLOSED;continue;case N.ATTRIB_VALUE_CLOSED:T(i)?n.state=N.ATTRIB:">"===i?K(n):"/"===i?n.state=N.OPEN_TAG_SLASH:h(m,i)?(w(n,"No whitespace between attributes"),n.attribName=i,n.attribValue="",n.state=N.ATTRIB_NAME):w(n,"Invalid attribute name");continue;case N.ATTRIB_VALUE_UNQUOTED:if(!y(i)){"&"===i?n.state=N.ATTRIB_VALUE_ENTITY_U:n.attribValue+=i;continue}U(n),">"===i?K(n):n.state=N.ATTRIB;continue;case N.CLOSE_TAG:if(n.tagName)">"===i?G(n):h(f,i)?n.tagName+=i:n.script?(n.script+="</"+n.tagName,n.tagName="",n.state=N.SCRIPT):(T(i)||w(n,"Invalid tagname in closing tag"),n.state=N.CLOSE_TAG_SAW_WHITE);else{if(T(i))continue;b(m,i)?n.script?(n.script+="</"+i,n.state=N.SCRIPT):w(n,"Invalid tagname in closing tag."):n.tagName=i}continue;case N.CLOSE_TAG_SAW_WHITE:if(T(i))continue;">"===i?G(n):w(n,"Invalid characters in closing tag");continue;case N.TEXT_ENTITY:case N.ATTRIB_VALUE_ENTITY_Q:case N.ATTRIB_VALUE_ENTITY_U:var l,p;switch(n.state){case N.TEXT_ENTITY:l=N.TEXT,p="textNode";break;case N.ATTRIB_VALUE_ENTITY_Q:l=N.ATTRIB_VALUE_QUOTED,p="attribValue";break;case N.ATTRIB_VALUE_ENTITY_U:l=N.ATTRIB_VALUE_UNQUOTED,p="attribValue"}if(";"===i){var F=L(n);n.opt.unparsedEntities&&!Object.values(e.XML_ENTITIES).includes(F)?(n.entity="",n.state=l,n.write(F)):(n[p]+=F,n.entity="",n.state=l)}else h(n.entity.length?d:g,i)?n.entity+=i:(w(n,"Invalid character in entity name"),n[p]+="&"+n.entity+i,n.entity="",n.state=l);continue;default:throw new Error(n,"Unknown state: "+n.state)}return n.position>=n.bufferCheckPosition&&function(t){for(var n=Math.max(e.MAX_BUFFER_LENGTH,10),r=0,i=0,s=a.length;i<s;i++){var o=t[a[i]].length;if(o>n)switch(a[i]){case"textNode":C(t);break;case"cdata":D(t,"oncdata",t.cdata),t.cdata="";break;case"script":D(t,"onscript",t.script),t.script="";break;default:P(t,"Max buffer length exceeded: "+a[i])}r=Math.max(r,o)}var c=e.MAX_BUFFER_LENGTH-r;t.bufferCheckPosition=c+t.position}(n),n},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var e;C(e=this),""!==e.cdata&&(D(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(D(e,"onscript",e.script),e.script="")}};try{t=n(277).Stream}catch(e){t=function(){}}t||(t=function(){});var i=e.EVENTS.filter((function(e){return"error"!==e&&"end"!==e}));function s(e,n){if(!(this instanceof s))return new s(e,n);t.apply(this),this._parser=new r(e,n),this.writable=!0,this.readable=!0;var a=this;this._parser.onend=function(){a.emit("end")},this._parser.onerror=function(e){a.emit("error",e),a._parser.error=null},this._decoder=null,i.forEach((function(e){Object.defineProperty(a,"on"+e,{get:function(){return a._parser["on"+e]},set:function(t){if(!t)return a.removeAllListeners(e),a._parser["on"+e]=t,t;a.on(e,t)},enumerable:!0,configurable:!1})}))}s.prototype=Object.create(t.prototype,{constructor:{value:s}}),s.prototype.write=function(e){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(e)){if(!this._decoder){var t=n(763).StringDecoder;this._decoder=new t("utf8")}e=this._decoder.write(e)}return this._parser.write(e.toString()),this.emit("data",e),!0},s.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},s.prototype.on=function(e,n){var a=this;return a._parser["on"+e]||-1===i.indexOf(e)||(a._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),a.emit.apply(a,t)}),t.prototype.on.call(a,e,n)};var o="[CDATA[",c="DOCTYPE",u="http://www.w3.org/XML/1998/namespace",l="http://www.w3.org/2000/xmlns/",p={xml:u,xmlns:l},m=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,f=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,g=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,d=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function T(e){return" "===e||"\n"===e||"\r"===e||"\t"===e}function E(e){return'"'===e||"'"===e}function y(e){return">"===e||T(e)}function h(e,t){return e.test(t)}function b(e,t){return!h(e,t)}var F,x,A,N=0;for(var I in e.STATE={BEGIN:N++,BEGIN_WHITESPACE:N++,TEXT:N++,TEXT_ENTITY:N++,OPEN_WAKA:N++,SGML_DECL:N++,SGML_DECL_QUOTED:N++,DOCTYPE:N++,DOCTYPE_QUOTED:N++,DOCTYPE_DTD:N++,DOCTYPE_DTD_QUOTED:N++,COMMENT_STARTING:N++,COMMENT:N++,COMMENT_ENDING:N++,COMMENT_ENDED:N++,CDATA:N++,CDATA_ENDING:N++,CDATA_ENDING_2:N++,PROC_INST:N++,PROC_INST_BODY:N++,PROC_INST_ENDING:N++,OPEN_TAG:N++,OPEN_TAG_SLASH:N++,ATTRIB:N++,ATTRIB_NAME:N++,ATTRIB_NAME_SAW_WHITE:N++,ATTRIB_VALUE:N++,ATTRIB_VALUE_QUOTED:N++,ATTRIB_VALUE_CLOSED:N++,ATTRIB_VALUE_UNQUOTED:N++,ATTRIB_VALUE_ENTITY_Q:N++,ATTRIB_VALUE_ENTITY_U:N++,CLOSE_TAG:N++,CLOSE_TAG_SAW_WHITE:N++,SCRIPT:N++,SCRIPT_ENDING:N++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach((function(t){var n=e.ENTITIES[t],a="number"==typeof n?String.fromCharCode(n):n;e.ENTITIES[t]=a})),e.STATE)e.STATE[e.STATE[I]]=I;function S(e,t,n){e[t]&&e[t](n)}function D(e,t,n){e.textNode&&C(e),S(e,t,n)}function C(e){e.textNode=_(e.opt,e.textNode),e.textNode&&S(e,"ontext",e.textNode),e.textNode=""}function _(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function P(e,t){return C(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,S(e,"onerror",t),e}function O(e){return e.sawRoot&&!e.closedRoot&&w(e,"Unclosed root tag"),e.state!==N.BEGIN&&e.state!==N.BEGIN_WHITESPACE&&e.state!==N.TEXT&&P(e,"Unexpected end"),C(e),e.c="",e.closed=!0,S(e,"onend"),r.call(e,e.strict,e.opt),e}function w(e,t){if("object"!=typeof e||!(e instanceof r))throw new Error("bad call to strictFail");e.strict&&P(e,t)}function v(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,n=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(n.ns=t.ns),e.attribList.length=0,D(e,"onopentagstart",n)}function R(e,t){var n=e.indexOf(":")<0?["",e]:e.split(":"),a=n[0],r=n[1];return t&&"xmlns"===e&&(a="xmlns",r=""),{prefix:a,local:r}}function U(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName))e.attribName=e.attribValue="";else{if(e.opt.xmlns){var t=R(e.attribName,!0),n=t.prefix,a=t.local;if("xmlns"===n)if("xml"===a&&e.attribValue!==u)w(e,"xml: prefix must be bound to "+u+"\nActual: "+e.attribValue);else if("xmlns"===a&&e.attribValue!==l)w(e,"xmlns: prefix must be bound to "+l+"\nActual: "+e.attribValue);else{var r=e.tag,i=e.tags[e.tags.length-1]||e;r.ns===i.ns&&(r.ns=Object.create(i.ns)),r.ns[a]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,D(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}}function K(e,t){if(e.opt.xmlns){var n=e.tag,a=R(e.tagName);n.prefix=a.prefix,n.local=a.local,n.uri=n.ns[a.prefix]||"",n.prefix&&!n.uri&&(w(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),n.uri=a.prefix);var r=e.tags[e.tags.length-1]||e;n.ns&&r.ns!==n.ns&&Object.keys(n.ns).forEach((function(t){D(e,"onopennamespace",{prefix:t,uri:n.ns[t]})}));for(var i=0,s=e.attribList.length;i<s;i++){var o=e.attribList[i],c=o[0],u=o[1],l=R(c,!0),p=l.prefix,m=l.local,f=""===p?"":n.ns[p]||"",g={name:c,value:u,prefix:p,local:m,uri:f};p&&"xmlns"!==p&&!f&&(w(e,"Unbound namespace prefix: "+JSON.stringify(p)),g.uri=p),e.tag.attributes[c]=g,D(e,"onattribute",g)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),D(e,"onopentag",e.tag),t||(e.noscript||"script"!==e.tagName.toLowerCase()?e.state=N.TEXT:e.state=N.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function G(e){if(!e.tagName)return w(e,"Weird empty close tag."),e.textNode+="</>",void(e.state=N.TEXT);if(e.script){if("script"!==e.tagName)return e.script+="</"+e.tagName+">",e.tagName="",void(e.state=N.SCRIPT);D(e,"onscript",e.script),e.script=""}var t=e.tags.length,n=e.tagName;e.strict||(n=n[e.looseCase]());for(var a=n;t--&&e.tags[t].name!==a;)w(e,"Unexpected close tag");if(t<0)return w(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",void(e.state=N.TEXT);e.tagName=n;for(var r=e.tags.length;r-- >t;){var i=e.tag=e.tags.pop();e.tagName=e.tag.name,D(e,"onclosetag",e.tagName);var s={};for(var o in i.ns)s[o]=i.ns[o];var c=e.tags[e.tags.length-1]||e;e.opt.xmlns&&i.ns!==c.ns&&Object.keys(i.ns).forEach((function(t){var n=i.ns[t];D(e,"onclosenamespace",{prefix:t,uri:n})}))}0===t&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=N.TEXT}function L(e){var t,n=e.entity,a=n.toLowerCase(),r="";return e.ENTITIES[n]?e.ENTITIES[n]:e.ENTITIES[a]?e.ENTITIES[a]:("#"===(n=a).charAt(0)&&("x"===n.charAt(1)?(n=n.slice(2),r=(t=parseInt(n,16)).toString(16)):(n=n.slice(1),r=(t=parseInt(n,10)).toString(10))),n=n.replace(/^0+/,""),isNaN(t)||r.toLowerCase()!==n?(w(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCodePoint(t))}function B(e,t){"<"===t?(e.state=N.OPEN_WAKA,e.startTagPosition=e.position):T(t)||(w(e,"Non-whitespace before first tag."),e.textNode=t,e.state=N.TEXT)}function M(e,t){var n="";return t<e.length&&(n=e.charAt(t)),n}N=e.STATE,String.fromCodePoint||(F=String.fromCharCode,x=Math.floor,A=function(){var e,t,n=[],a=-1,r=arguments.length;if(!r)return"";for(var i="";++a<r;){var s=Number(arguments[a]);if(!isFinite(s)||s<0||s>1114111||x(s)!==s)throw RangeError("Invalid code point: "+s);s<=65535?n.push(s):(e=55296+((s-=65536)>>10),t=s%1024+56320,n.push(e,t)),(a+1===r||n.length>16384)&&(i+=F.apply(null,n),n.length=0)}return i},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:A,configurable:!0,writable:!0}):String.fromCodePoint=A)}(t)},157:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findXMPinJPEG=t.findEXIFinJPEG=t.getImageData=t.imageHasData=t.disableXmp=t.enableXmp=t.StringValues=t.IFD1Tags=t.GPSTags=t.TiffTags=t.ExifTags=void 0;const a=n(990);t.ExifTags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},t.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},t.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},t.IFD1Tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",296:"ResolutionUnit",513:"JpegIFOffset",514:"JpegIFByteCount",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite"},t.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};let r=!1;function i(e){const t=new DataView(e);if(255!=t.getUint8(0)||216!=t.getUint8(1))return null;let n=2;const a=e.byteLength;for(;n<a;){if(255!=t.getUint8(n))return null;if(225==t.getUint8(n+1))return p(t,n+4);n+=2+t.getUint16(n+2)}return null}t.enableXmp=function(){r=!0},t.disableXmp=function(){r=!1},t.imageHasData=function(e){return!!e.exifdata},t.getImageData=function(e,t){function n(n){const a=i(n);e.exifdata=a||{};const s=function(e){const t=new DataView(e);if(255!=t.getUint8(0)||216!=t.getUint8(1))return null;let n=2;const a=e.byteLength,r=function(e,t){return 56===e.getUint8(t)&&66===e.getUint8(t+1)&&73===e.getUint8(t+2)&&77===e.getUint8(t+3)&&4===e.getUint8(t+4)&&4===e.getUint8(t+5)};for(;n<a;){if(r(t,n)){let a=t.getUint8(n+7);return a%2!=0&&(a+=1),0===a&&(a=4),o(e,n+8+a,t.getUint16(n+6+a))}n++}return null}(n);if(e.iptcdata=s||{},r){const t=m(n);e.xmpdata=t||{}}t&&t.call(e)}if(e.src)if(/^data\:/i.test(e.src))n(function(e,t=""){t=t||e.match(/^data\:([^\;]+)\;base64,/im)[1]||"",e=e.replace(/^data\:([^\;]+)\;base64,/gim,"");const n=atob(e),a=n.length,r=new ArrayBuffer(a),i=new Uint8Array(r);for(let e=0;e<a;e++)i[e]=n.charCodeAt(e);return r}(e.src));else if(/^blob\:/i.test(e.src)){const t=new FileReader;t.onload=function(e){n(e.target.result)},function(e,n){const a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="blob",a.onload=function(e){var n;200!=this.status&&0!==this.status||(n=this.response,t.readAsArrayBuffer(n))},a.send()}(e.src)}else{const t=new XMLHttpRequest;t.onload=function(){if(200!=this.status&&0!==this.status)throw new Error("Could not load image");n(t.response)},t.open("GET",e.src,!0),t.responseType="arraybuffer",t.send(null)}else if(self.FileReader&&(e instanceof self.Blob||e instanceof self.File)){const t=new FileReader;t.onload=function(e){n(e.target.result)},t.readAsArrayBuffer(e)}},t.findEXIFinJPEG=i;const s={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};function o(e,t,n){const a=new DataView(e),r={};let i=t;for(;i<t+n;){if(28===a.getUint8(i)&&2===a.getUint8(i+1)){const e=a.getUint8(i+2);if(e in s){const t=a.getInt16(i+3),n=s[e],o=l(a,i+5,t);r.hasOwnProperty(n)?r[n]instanceof Array?r[n].push(o):r[n]=[r[n],o]:r[n]=o}}i++}return r}function c(e,t,n,a,r){const i=e.getUint16(n,!r),s={};for(let o=0;o<i;o++){const i=n+12*o+2;s[a[e.getUint16(i,!r)]]=u(e,i,t,0,r)}return s}function u(e,t,n,a,r){const i=e.getUint16(t+2,!r),s=e.getUint32(t+4,!r),o=e.getUint32(t+8,!r)+n;switch(i){case 1:case 7:if(1==s)return e.getUint8(t+8);{const n=s>4?o:t+8,a=[];for(let t=0;t<s;t++)a[t]=e.getUint8(n+t);return a}case 2:return l(e,s>4?o:t+8,s-1);case 3:if(1==s)return e.getUint16(t+8,!r);{const n=s>2?o:t+8,a=[];for(let t=0;t<s;t++)a[t]=e.getUint16(n+2*t,!r);return a}case 4:if(1==s)return e.getUint32(t+8,!r);{const t=[];for(let n=0;n<s;n++)t[n]=e.getUint32(o+4*n,!r);return t}case 5:if(1==s){const t=e.getUint32(o,!r),n=e.getUint32(o+4,!r),a=new Number(t/n);return a.numerator=t,a.denominator=n,a}{const t=[];for(let n=0;n<s;n++){const a=e.getUint32(o+8*n,!r),i=e.getUint32(o+4+8*n,!r);t[n]=new Number(a/i),t[n].numerator=a,t[n].denominator=i}return t}case 9:if(1==s)return e.getInt32(t+8,!r);{const t=[];for(let n=0;n<s;n++)t[n]=e.getInt32(o+4*n,!r);return t}case 10:if(1==s)return e.getInt32(o,!r)/e.getInt32(o+4,!r);{const t=[];for(let n=0;n<s;n++)t[n]=e.getInt32(o+8*n,!r)/e.getInt32(o+4+8*n,!r);return t}}}function l(e,t,n){let a="";for(let r=t;r<t+n;r++)a+=String.fromCharCode(e.getUint8(r));return a}function p(e,n){if("Exif"!=l(e,n,4))return null;let a;const r=n+6;if(18761==e.getUint16(r))a=!1;else{if(19789!=e.getUint16(r))return null;a=!0}if(42!=e.getUint16(r+2,!a))return null;const i=e.getUint32(r+4,!a);if(i<8)return null;const s=c(e,r,r+i,t.TiffTags,a);if(s.ExifIFDPointer){const n=c(e,r,r+s.ExifIFDPointer,t.ExifTags,a);for(const e in n){switch(e){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":n[e]=t.StringValues[e][n[e]];break;case"ExifVersion":case"FlashpixVersion":n[e]=String.fromCharCode(n[e][0],n[e][1],n[e][2],n[e][3]);break;case"ComponentsConfiguration":n[e]=t.StringValues.Components[n[e][0]]+t.StringValues.Components[n[e][1]]+t.StringValues.Components[n[e][2]]+t.StringValues.Components[n[e][3]]}s[e]=n[e]}}if(s.GPSInfoIFDPointer){const n=c(e,r,r+s.GPSInfoIFDPointer,t.GPSTags,a);for(const e in n)"GPSVersionID"===e&&(n[e]=n[e][0]+"."+n[e][1]+"."+n[e][2]+"."+n[e][3]),s[e]=n[e]}return s.thumbnail=function(e,n,a,r){const i=function(e,t,n){const a=e.getUint16(t,!n);return e.getUint32(t+2+12*a,!n)}(e,n+a,r);if(!i)return{};if(i>e.byteLength)return{};const s=c(e,n,n+i,t.IFD1Tags,r);if(s.Compression)switch(s.Compression){case 6:if(s.JpegIFOffset&&s.JpegIFByteCount){const t=n+s.JpegIFOffset,a=s.JpegIFByteCount;s.blob=new Blob([new Uint8Array(e.buffer,t,a)],{type:"image/jpeg"})}break;case 1:console.log("Thumbnail image format is TIFF, which is not implemented.");break;default:console.log("Unknown thumbnail image format '%s'",s.Compression)}else 2==s.PhotometricInterpretation&&console.log("Thumbnail image format is RGB, which is not implemented.");return s}(e,r,i,a),s}function m(e){const t=new DataView(e);if(255!=t.getUint8(0)||216!=t.getUint8(1))return null;let n=2;const r=e.byteLength;for(;n<r-4;){if("http"==l(t,n,4)){const e=n-1,r=t.getUint16(n-2)-1;let i=l(t,e,r);const s=i.indexOf("xmpmeta>")+8;i=i.substring(i.indexOf("<x:xmpmeta"),s);const o=i.indexOf("x:xmpmeta")+10;return i=i.slice(0,o)+'xmlns:Iptc4xmpCore="http://iptc.org/std/Iptc4xmpCore/1.0/xmlns/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tiff="http://ns.adobe.com/tiff/1.0/" xmlns:plus="http://schemas.android.com/apk/lib/com.google.android.gms.plus" xmlns:ext="http://www.gettyimages.com/xsltExtension/1.0" xmlns:exif="http://ns.adobe.com/exif/1.0/" xmlns:stEvt="http://ns.adobe.com/xap/1.0/sType/ResourceEvent#" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmlns:crs="http://ns.adobe.com/camera-raw-settings/1.0/" xmlns:xapGImg="http://ns.adobe.com/xap/1.0/g/img/" xmlns:Iptc4xmpExt="http://iptc.org/std/Iptc4xmpExt/2008-02-29/" '+i.slice(o),JSON.parse((0,a.xml2json)(i,{compact:!0}))}n++}return null}t.findXMPinJPEG=m},740:e=>{e.exports={isArray:function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)}}},990:(e,t,n)=>{var a=n(538),r=n(3),i=n(348),s=n(433);e.exports={xml2js:a,xml2json:r,js2xml:i,json2xml:s}},348:(e,t,n)=>{var a,r,i=n(193),s=n(740).isArray;function o(e,t,n){return(!n&&e.spaces?"\n":"")+Array(t+1).join(e.spaces)}function c(e,t,n){if(t.ignoreAttributes)return"";"attributesFn"in t&&(e=t.attributesFn(e,r,a));var i,s,c,u,l=[];for(i in e)e.hasOwnProperty(i)&&null!==e[i]&&void 0!==e[i]&&(u=t.noQuotesForNativeAttributes&&"string"!=typeof e[i]?"":'"',s=(s=""+e[i]).replace(/"/g,"&quot;"),c="attributeNameFn"in t?t.attributeNameFn(i,s,r,a):i,l.push(t.spaces&&t.indentAttributes?o(t,n+1,!1):" "),l.push(c+"="+u+("attributeValueFn"in t?t.attributeValueFn(s,i,r,a):s)+u));return e&&Object.keys(e).length&&t.spaces&&t.indentAttributes&&l.push(o(t,n,!1)),l.join("")}function u(e,t,n){return a=e,r="xml",t.ignoreDeclaration?"":"<?xml"+c(e[t.attributesKey],t,n)+"?>"}function l(e,t,n){if(t.ignoreInstruction)return"";var i;for(i in e)if(e.hasOwnProperty(i))break;var s="instructionNameFn"in t?t.instructionNameFn(i,e[i],r,a):i;if("object"==typeof e[i])return a=e,r=s,"<?"+s+c(e[i][t.attributesKey],t,n)+"?>";var o=e[i]?e[i]:"";return"instructionFn"in t&&(o=t.instructionFn(o,i,r,a)),"<?"+s+(o?" "+o:"")+"?>"}function p(e,t){return t.ignoreComment?"":"\x3c!--"+("commentFn"in t?t.commentFn(e,r,a):e)+"--\x3e"}function m(e,t){return t.ignoreCdata?"":"<![CDATA["+("cdataFn"in t?t.cdataFn(e,r,a):e.replace("]]>","]]]]><![CDATA[>"))+"]]>"}function f(e,t){return t.ignoreDoctype?"":"<!DOCTYPE "+("doctypeFn"in t?t.doctypeFn(e,r,a):e)+">"}function g(e,t){return t.ignoreText?"":(e=(e=(e=""+e).replace(/&amp;/g,"&")).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"textFn"in t?t.textFn(e,r,a):e)}function d(e,t,n,i){return e.reduce((function(e,s){var u=o(t,n,i&&!e);switch(s.type){case"element":return e+u+function(e,t,n){a=e,r=e.name;var i=[],s="elementNameFn"in t?t.elementNameFn(e.name,e):e.name;i.push("<"+s),e[t.attributesKey]&&i.push(c(e[t.attributesKey],t,n));var o=e[t.elementsKey]&&e[t.elementsKey].length||e[t.attributesKey]&&"preserve"===e[t.attributesKey]["xml:space"];return o||(o="fullTagEmptyElementFn"in t?t.fullTagEmptyElementFn(e.name,e):t.fullTagEmptyElement),o?(i.push(">"),e[t.elementsKey]&&e[t.elementsKey].length&&(i.push(d(e[t.elementsKey],t,n+1)),a=e,r=e.name),i.push(t.spaces&&function(e,t){var n;if(e.elements&&e.elements.length)for(n=0;n<e.elements.length;++n)switch(e.elements[n][t.typeKey]){case"text":if(t.indentText)return!0;break;case"cdata":if(t.indentCdata)return!0;break;case"instruction":if(t.indentInstruction)return!0;break;default:return!0}return!1}(e,t)?"\n"+Array(n+1).join(t.spaces):""),i.push("</"+s+">")):i.push("/>"),i.join("")}(s,t,n);case"comment":return e+u+p(s[t.commentKey],t);case"doctype":return e+u+f(s[t.doctypeKey],t);case"cdata":return e+(t.indentCdata?u:"")+m(s[t.cdataKey],t);case"text":return e+(t.indentText?u:"")+g(s[t.textKey],t);case"instruction":var T={};return T[s[t.nameKey]]=s[t.attributesKey]?s:s[t.instructionKey],e+(t.indentInstruction?u:"")+l(T,t,n)}}),"")}function T(e,t,n){var a;for(a in e)if(e.hasOwnProperty(a))switch(a){case t.parentKey:case t.attributesKey:break;case t.textKey:if(t.indentText||n)return!0;break;case t.cdataKey:if(t.indentCdata||n)return!0;break;case t.instructionKey:if(t.indentInstruction||n)return!0;break;case t.doctypeKey:case t.commentKey:default:return!0}return!1}function E(e,t,n,i,s){a=e,r=t;var u="elementNameFn"in n?n.elementNameFn(t,e):t;if(null==e||""===e)return"fullTagEmptyElementFn"in n&&n.fullTagEmptyElementFn(t,e)||n.fullTagEmptyElement?"<"+u+"></"+u+">":"<"+u+"/>";var l=[];if(t){if(l.push("<"+u),"object"!=typeof e)return l.push(">"+g(e,n)+"</"+u+">"),l.join("");e[n.attributesKey]&&l.push(c(e[n.attributesKey],n,i));var p=T(e,n,!0)||e[n.attributesKey]&&"preserve"===e[n.attributesKey]["xml:space"];if(p||(p="fullTagEmptyElementFn"in n?n.fullTagEmptyElementFn(t,e):n.fullTagEmptyElement),!p)return l.push("/>"),l.join("");l.push(">")}return l.push(y(e,n,i+1,!1)),a=e,r=t,t&&l.push((s?o(n,i,!1):"")+"</"+u+">"),l.join("")}function y(e,t,n,a){var r,i,c,d=[];for(i in e)if(e.hasOwnProperty(i))for(c=s(e[i])?e[i]:[e[i]],r=0;r<c.length;++r){switch(i){case t.declarationKey:d.push(u(c[r],t,n));break;case t.instructionKey:d.push((t.indentInstruction?o(t,n,a):"")+l(c[r],t,n));break;case t.attributesKey:case t.parentKey:break;case t.textKey:d.push((t.indentText?o(t,n,a):"")+g(c[r],t));break;case t.cdataKey:d.push((t.indentCdata?o(t,n,a):"")+m(c[r],t));break;case t.doctypeKey:d.push(o(t,n,a)+f(c[r],t));break;case t.commentKey:d.push(o(t,n,a)+p(c[r],t));break;default:d.push(o(t,n,a)+E(c[r],i,t,n,T(c[r],t)))}a=a&&!d.length}return d.join("")}e.exports=function(e,t){t=function(e){var t=i.copyOptions(e);return i.ensureFlagExists("ignoreDeclaration",t),i.ensureFlagExists("ignoreInstruction",t),i.ensureFlagExists("ignoreAttributes",t),i.ensureFlagExists("ignoreText",t),i.ensureFlagExists("ignoreComment",t),i.ensureFlagExists("ignoreCdata",t),i.ensureFlagExists("ignoreDoctype",t),i.ensureFlagExists("compact",t),i.ensureFlagExists("indentText",t),i.ensureFlagExists("indentCdata",t),i.ensureFlagExists("indentAttributes",t),i.ensureFlagExists("indentInstruction",t),i.ensureFlagExists("fullTagEmptyElement",t),i.ensureFlagExists("noQuotesForNativeAttributes",t),i.ensureSpacesExists(t),"number"==typeof t.spaces&&(t.spaces=Array(t.spaces+1).join(" ")),i.ensureKeyExists("declaration",t),i.ensureKeyExists("instruction",t),i.ensureKeyExists("attributes",t),i.ensureKeyExists("text",t),i.ensureKeyExists("comment",t),i.ensureKeyExists("cdata",t),i.ensureKeyExists("doctype",t),i.ensureKeyExists("type",t),i.ensureKeyExists("name",t),i.ensureKeyExists("elements",t),i.checkFnExists("doctype",t),i.checkFnExists("instruction",t),i.checkFnExists("cdata",t),i.checkFnExists("comment",t),i.checkFnExists("text",t),i.checkFnExists("instructionName",t),i.checkFnExists("elementName",t),i.checkFnExists("attributeName",t),i.checkFnExists("attributeValue",t),i.checkFnExists("attributes",t),i.checkFnExists("fullTagEmptyElement",t),t}(t);var n=[];return a=e,r="_root_",t.compact?n.push(y(e,t,0,!0)):(e[t.declarationKey]&&n.push(u(e[t.declarationKey],t,0)),e[t.elementsKey]&&e[t.elementsKey].length&&n.push(d(e[t.elementsKey],t,0,!n.length))),n.join("")}},433:(e,t,n)=>{var a=n(348);e.exports=function(e,t){e instanceof Buffer&&(e=e.toString());var n=null;if("string"==typeof e)try{n=JSON.parse(e)}catch(e){throw new Error("The JSON structure is invalid")}else n=e;return a(n,t)}},193:(e,t,n)=>{var a=n(740).isArray;e.exports={copyOptions:function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n},ensureFlagExists:function(e,t){e in t&&"boolean"==typeof t[e]||(t[e]=!1)},ensureSpacesExists:function(e){(!("spaces"in e)||"number"!=typeof e.spaces&&"string"!=typeof e.spaces)&&(e.spaces=0)},ensureAlwaysArrayExists:function(e){"alwaysArray"in e&&("boolean"==typeof e.alwaysArray||a(e.alwaysArray))||(e.alwaysArray=!1)},ensureKeyExists:function(e,t){e+"Key"in t&&"string"==typeof t[e+"Key"]||(t[e+"Key"]=t.compact?"_"+e:e)},checkFnExists:function(e,t){return e+"Fn"in t}}},538:(e,t,n)=>{var a,r,i=n(43),s=n(193),o=n(740).isArray;function c(e){var t=Number(e);if(!isNaN(t))return t;var n=e.toLowerCase();return"true"===n||"false"!==n&&e}function u(e,t){var n;if(a.compact){if(!r[a[e+"Key"]]&&(o(a.alwaysArray)?-1!==a.alwaysArray.indexOf(a[e+"Key"]):a.alwaysArray)&&(r[a[e+"Key"]]=[]),r[a[e+"Key"]]&&!o(r[a[e+"Key"]])&&(r[a[e+"Key"]]=[r[a[e+"Key"]]]),e+"Fn"in a&&"string"==typeof t&&(t=a[e+"Fn"](t,r)),"instruction"===e&&("instructionFn"in a||"instructionNameFn"in a))for(n in t)if(t.hasOwnProperty(n))if("instructionFn"in a)t[n]=a.instructionFn(t[n],n,r);else{var i=t[n];delete t[n],t[a.instructionNameFn(n,i,r)]=i}o(r[a[e+"Key"]])?r[a[e+"Key"]].push(t):r[a[e+"Key"]]=t}else{r[a.elementsKey]||(r[a.elementsKey]=[]);var s={};if(s[a.typeKey]=e,"instruction"===e){for(n in t)if(t.hasOwnProperty(n))break;s[a.nameKey]="instructionNameFn"in a?a.instructionNameFn(n,t,r):n,a.instructionHasAttributes?(s[a.attributesKey]=t[n][a.attributesKey],"instructionFn"in a&&(s[a.attributesKey]=a.instructionFn(s[a.attributesKey],n,r))):("instructionFn"in a&&(t[n]=a.instructionFn(t[n],n,r)),s[a.instructionKey]=t[n])}else e+"Fn"in a&&(t=a[e+"Fn"](t,r)),s[a[e+"Key"]]=t;a.addParent&&(s[a.parentKey]=r),r[a.elementsKey].push(s)}}function l(e){var t;if("attributesFn"in a&&e&&(e=a.attributesFn(e,r)),(a.trim||"attributeValueFn"in a||"attributeNameFn"in a||a.nativeTypeAttributes)&&e)for(t in e)if(e.hasOwnProperty(t)&&(a.trim&&(e[t]=e[t].trim()),a.nativeTypeAttributes&&(e[t]=c(e[t])),"attributeValueFn"in a&&(e[t]=a.attributeValueFn(e[t],t,r)),"attributeNameFn"in a)){var n=e[t];delete e[t],e[a.attributeNameFn(t,e[t],r)]=n}return e}function p(e){var t={};if(e.body&&("xml"===e.name.toLowerCase()||a.instructionHasAttributes)){for(var n,i=/([\w:-]+)\s*=\s*(?:"([^"]*)"|'([^']*)'|(\w+))\s*/g;null!==(n=i.exec(e.body));)t[n[1]]=n[2]||n[3]||n[4];t=l(t)}if("xml"===e.name.toLowerCase()){if(a.ignoreDeclaration)return;r[a.declarationKey]={},Object.keys(t).length&&(r[a.declarationKey][a.attributesKey]=t),a.addParent&&(r[a.declarationKey][a.parentKey]=r)}else{if(a.ignoreInstruction)return;a.trim&&(e.body=e.body.trim());var s={};a.instructionHasAttributes&&Object.keys(t).length?(s[e.name]={},s[e.name][a.attributesKey]=t):s[e.name]=e.body,u("instruction",s)}}function m(e,t){var n;if("object"==typeof e&&(t=e.attributes,e=e.name),t=l(t),"elementNameFn"in a&&(e=a.elementNameFn(e,r)),a.compact){var i;if(n={},!a.ignoreAttributes&&t&&Object.keys(t).length)for(i in n[a.attributesKey]={},t)t.hasOwnProperty(i)&&(n[a.attributesKey][i]=t[i]);!(e in r)&&(o(a.alwaysArray)?-1!==a.alwaysArray.indexOf(e):a.alwaysArray)&&(r[e]=[]),r[e]&&!o(r[e])&&(r[e]=[r[e]]),o(r[e])?r[e].push(n):r[e]=n}else r[a.elementsKey]||(r[a.elementsKey]=[]),(n={})[a.typeKey]="element",n[a.nameKey]=e,!a.ignoreAttributes&&t&&Object.keys(t).length&&(n[a.attributesKey]=t),a.alwaysChildren&&(n[a.elementsKey]=[]),r[a.elementsKey].push(n);n[a.parentKey]=r,r=n}function f(e){a.ignoreText||(e.trim()||a.captureSpacesBetweenElements)&&(a.trim&&(e=e.trim()),a.nativeType&&(e=c(e)),a.sanitize&&(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),u("text",e))}function g(e){a.ignoreComment||(a.trim&&(e=e.trim()),u("comment",e))}function d(e){var t=r[a.parentKey];a.addParent||delete r[a.parentKey],r=t}function T(e){a.ignoreCdata||(a.trim&&(e=e.trim()),u("cdata",e))}function E(e){a.ignoreDoctype||(e=e.replace(/^ /,""),a.trim&&(e=e.trim()),u("doctype",e))}function y(e){e.note=e}e.exports=function(e,t){var n=i.parser(!0,{}),o={};if(r=o,a=function(e){return a=s.copyOptions(e),s.ensureFlagExists("ignoreDeclaration",a),s.ensureFlagExists("ignoreInstruction",a),s.ensureFlagExists("ignoreAttributes",a),s.ensureFlagExists("ignoreText",a),s.ensureFlagExists("ignoreComment",a),s.ensureFlagExists("ignoreCdata",a),s.ensureFlagExists("ignoreDoctype",a),s.ensureFlagExists("compact",a),s.ensureFlagExists("alwaysChildren",a),s.ensureFlagExists("addParent",a),s.ensureFlagExists("trim",a),s.ensureFlagExists("nativeType",a),s.ensureFlagExists("nativeTypeAttributes",a),s.ensureFlagExists("sanitize",a),s.ensureFlagExists("instructionHasAttributes",a),s.ensureFlagExists("captureSpacesBetweenElements",a),s.ensureAlwaysArrayExists(a),s.ensureKeyExists("declaration",a),s.ensureKeyExists("instruction",a),s.ensureKeyExists("attributes",a),s.ensureKeyExists("text",a),s.ensureKeyExists("comment",a),s.ensureKeyExists("cdata",a),s.ensureKeyExists("doctype",a),s.ensureKeyExists("type",a),s.ensureKeyExists("name",a),s.ensureKeyExists("elements",a),s.ensureKeyExists("parent",a),s.checkFnExists("doctype",a),s.checkFnExists("instruction",a),s.checkFnExists("cdata",a),s.checkFnExists("comment",a),s.checkFnExists("text",a),s.checkFnExists("instructionName",a),s.checkFnExists("elementName",a),s.checkFnExists("attributeName",a),s.checkFnExists("attributeValue",a),s.checkFnExists("attributes",a),a}(t),n.opt={strictEntities:!0},n.onopentag=m,n.ontext=f,n.oncomment=g,n.onclosetag=d,n.onerror=y,n.oncdata=T,n.ondoctype=E,n.onprocessinginstruction=p,n.write(e).close(),o[a.elementsKey]){var c=o[a.elementsKey];delete o[a.elementsKey],o[a.elementsKey]=c,delete o.text}return o}},3:(e,t,n)=>{var a=n(193),r=n(538);e.exports=function(e,t){var n,i,s;return n=function(e){var t=a.copyOptions(e);return a.ensureSpacesExists(t),t}(t),i=r(e,n),s="compact"in n&&n.compact?"_parent":"parent",("addParent"in n&&n.addParent?JSON.stringify(i,(function(e,t){return e===s?"_":t}),n.spaces):JSON.stringify(i,null,n.spaces)).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}},277:()=>{},763:()=>{}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var i=t[a]={exports:{}};return e[a](i,i.exports,n),i.exports}var a={};return(()=>{"use strict";var e=a;Object.defineProperty(e,"__esModule",{value:!0}),e.readFromBinaryFile=e.pretty=e.getAllIptcTags=e.getAllTags=e.getIptcTag=e.getTag=e.getData=e.disableXmp=e.enableXmp=e.StringValues=e.IFD1Tags=e.GPSTags=e.TiffTags=e.Tags=void 0;const t=n(157);e.Tags=t.ExifTags,e.TiffTags=t.TiffTags,e.GPSTags=t.GPSTags,e.IFD1Tags=t.IFD1Tags,e.StringValues=t.StringValues,e.enableXmp=function(){t.enableXmp()},e.disableXmp=function(){t.disableXmp()},e.getData=function(e,n){return!((self.Image&&e instanceof self.Image||self.HTMLImageElement&&e instanceof self.HTMLImageElement)&&!e.complete||(t.imageHasData(e)?n&&n.call(e):t.getImageData(e,n),0))},e.getTag=function(e,n){if(t.imageHasData(e))return e.exifdata[n]},e.getIptcTag=function(e,n){if(t.imageHasData(e))return e.iptcdata[n]},e.getAllTags=function(e){if(!t.imageHasData(e))return{};const n={},a=e.exifdata;for(const e in a)a.hasOwnProperty(e)&&(n[e]=a[e]);return n},e.getAllIptcTags=function(e){if(!t.imageHasData(e))return{};const n={},a=e.iptcdata;for(const e in a)a.hasOwnProperty(e)&&(n[e]=a[e]);return n},e.pretty=function(e){if(!t.imageHasData(e))return"";let n="";const a=e.exifdata;for(const e in a)a.hasOwnProperty(e)&&("object"==typeof a[e]?a[e]instanceof Number?n+=e+" : "+a[e]+" ["+a[e].numerator+"/"+a[e].denominator+"]\r\n":n+=e+" : ["+a[e].length+" values]\r\n":n+=e+" : "+a[e]+"\r\n");return n},e.readFromBinaryFile=function(e){return t.findEXIFinJPEG(e)}})(),a})()));